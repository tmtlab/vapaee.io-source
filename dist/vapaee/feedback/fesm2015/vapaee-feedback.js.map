{"version":3,"file":"vapaee-feedback.js.map","sources":["ng://@vapaee/feedback/lib/feedback.service.ts","ng://@vapaee/feedback/lib/feedback.module.ts"],"sourcesContent":["import { Component, Injectable, Pipe, Directive } from \"@angular/core\";\nimport { Type } from \"@angular/compiler\";\n\nexport interface Feed {\n    msg?:string;\n    msgtype?:string;\n    loading?:boolean;\n    start?:Date;\n    marks?:{\n        label:string,\n        sec:number,\n        millisec:number\n    }[]\n}\n\nexport interface FeedMap {\n    [key:string]:Feed\n};\n\n@Injectable({\n    providedIn:\"root\"\n})\nexport class Feedback {\n    public keys: string[];\n    private scopes: FeedMap;\n\n    constructor() {\n        this.keys = []\n        this.scopes = {};\n    }\n\n    static create(keys:string[] = []) {\n        var feed = new Feedback();\n        feed.keys = keys;\n        return feed;\n    }\n\n    private updateScopes() {\n        for (var i in this.keys) {\n            this.scopes[this.keys[i]] = this.scopes[this.keys[i]] || {}\n        }\n    }\n\n    private addKey(key:string) {\n        this.keys.push(key);\n        this.updateScopes();\n    }\n\n    startChrono(key:string) {\n        if (this.scopes[key]) {\n            this.scopes[key].start = new Date();\n            this.scopes[key].marks = [];\n        } else {\n            this.addKey(key);\n            this.startChrono(key);\n        }\n    }\n\n    setMarck(key:string, label:string) {\n        if (this.scopes[key]) {\n            var elapsedTime:Date = new Date();\n            var millisec = elapsedTime.getTime() - this.scopes[key].start.getTime();\n            var sec = millisec / 1000;\n            this.scopes[key].marks.push({ label, sec, millisec });\n        } else {\n            console.error(\"ERROR: key not present\", key, this.scopes);\n        }        \n    }\n\n    printChrono(key:string, lastMark:boolean = true) {\n        if (this.scopes[key]) {\n            console.log(\"Chronometer marks for \", key);\n            this.setMarck(key, \"total\");\n            for (var i in this.scopes[key].marks) {\n                console.log(\"- \",this.scopes[key].marks[i]);\n            }\n        } else {\n            console.error(\"ERROR: key not present\", key, this.scopes);\n        }        \n    }\n\n    setLoading(key:string, value:boolean) {\n        if (this.scopes[key]) {\n            this.scopes[key].loading = value;\n        } else {\n            this.addKey(key);\n            this.setLoading(key, value);\n        }\n    }\n\n    loading(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].loading;\n        }\n        return false;\n    }\n\n    setError(key:string, err: string = \"\") {\n        if (this.scopes[key]) {\n            this.scopes[key].msg = err;\n            this.scopes[key].msgtype = \"error\";\n        } else {\n            this.addKey(key);\n            this.setError(key, err);\n        }\n    }\n\n    clearError(key:string) {\n        this.setError(key, \"\");\n    }\n\n\n    error(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].msg;\n        }\n        return \"\";\n    }\n\n    setMessage(key:string, msg: string, msgtype: string) {\n        if (this.scopes[key]) {\n            this.scopes[key].msg = msg;\n            this.scopes[key].msgtype = msgtype;\n        } else {\n            this.addKey(key);\n            this.setMessage(key, msg, msgtype);\n        }\n    }    \n\n    message(key:string) {\n        return this.error(key);\n    }\n\n    msgType(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].msgtype;\n        } else {\n            // console.error(\"ERROR\", key, [this.scopes]);\n        }\n        return \"\";\n    }\n\n}\n\n/*\n@Injectable({\n    providedIn: \"root\"\n})\nexport class FeedbackService {\n    \n    constructor(){}\n\n    create(keys:string[] = []) {\n        return new Feedback(keys);\n    }\n}\n*/","import { NgModule } from '@angular/core';\nimport { Feedback } from './feedback.service';\n\n\n\n@NgModule({\n  imports: [\n    \n  ],\n  declarations: [],\n  providers:[Feedback],\n  exports: []\n})\nexport class VapaeeFeedbackModule { }\n"],"names":[],"mappings":"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"}
